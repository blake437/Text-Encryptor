<html>
  <head>
    <style>
      /* Add basic styles for tabs */
      .tab {
        display: flex;
        cursor: pointer;
        padding: 10px;
        background-color: #f1f1f1;
        border: 1px solid #ccc;
        margin-right: 5px;
      }

      .tab:hover {
        background-color: #ddd;
      }

      .tab-content {
        display: none;
        border: 1px solid #ccc;
        padding: 15px;
        margin-top: 10px;
      }

      .tab-content.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <input type="text" placeholder="encryption key" id="key">
    <input type="number" placeholder="message number" id="num">

    <!-- Tabs -->
    <div id="tabs">
      <div class="tab" onclick="showTabContent('tab1')">Encrypt</div>
      <div class="tab" onclick="showTabContent('tab2')">Decrypt</div>
    </div>
    <div id="tab1" class="tab-content">
      Plaintext:
      <textarea id="plaintext">
      <button type="button" onclick="encrypt()">Encrypt</button>
    </div>
    <div id="tab2" class="tab-content">
      Ciphertext:
      <textarea id="ciphertext">
      <button type="button" onclick="decrypt">Decrypt</button>
    </div>
  </body>
  <script>
    // JavaScript to handle tab switching
    function showTabContent(tabId) {
      // Hide all tab content
      const contents = document.querySelectorAll('.tab-content');
      contents.forEach(content => content.classList.remove('active'));

      // Show the selected tab content
      const selectedTab = document.getElementById(tabId);
      selectedTab.classList.add('active');
    }
  // Function to handle Encrypt button click
    async function encrypt() { 
        const key = document.getElementById('key').value; // Get the encryption key
      let num = document.getElementById('num').value; // Get the message number
      const plaintext = document.getElementById('plaintext').value; // Get the plaintext

      // Set the message number to a random number if it is 0 or not set
      if (!num || num === "0") {
        num = Math.floor(Math.random() * 1000000); // Generate a random number (e.g., between 0 and 999999)
        document.getElementById('num').value = num; // Update the input field with the random number
      }

      // Helper function to compute SHA-256 hash
      async function sha256(message) {
        const encoder = new TextEncoder();
        const data = encoder.encode(message);
        const hashBuffer = await crypto.subtle.digest('SHA-256', data);
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
      }

      // Compute hashes
      const keyHash = await sha256(key);
      const numHash = await sha256(num);

      // Convert hexadecimal hash values to BigInt for multiplication
      const keyBigInt = BigInt('0x' + keyHash);
      const numBigInt = BigInt('0x' + numHash);

      // Multiply the two hashes
      const multipliedHashBigInt = keyBigInt * numBigInt;

      // Take the hash of the result
      const finalHash = await sha256(multipliedHashBigInt.toString());

      console.log('Final Hash:', finalHash);

      //`finalHash` is for encryption logic
}

  // Function to handle Decrypt button click
  async function decrypt() {
  const key = document.getElementById('key').value; // Get the encryption key
  const num = document.getElementById('num').value; // Get the message number
  const ciphertext = document.getElementById('ciphertext').value; // Get the ciphertext

  // Helper function to compute SHA-256 hash
  async function sha256(message) {
    const encoder = new TextEncoder();
    const data = encoder.encode(message);
    const hashBuffer = await crypto.subtle.digest('SHA-256', data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
  }

  // Compute hashes
  const keyHash = await sha256(key);
  const numHash = await sha256(num);

  // Convert hexadecimal hash values to BigInt for multiplication
  const keyBigInt = BigInt('0x' + keyHash);
  const numBigInt = BigInt('0x' + numHash);

  // Multiply the two hashes
  const multipliedHashBigInt = keyBigInt * numBigInt;

  // Take the hash of the result
  const finalHash = await sha256(multipliedHashBigInt.toString());

  console.log('Final Hash for Decryption:', finalHash);

  //use `finalHash` for decryption logic
}
  </script>
</html>
